# 触って学ぶクラウドインフラAWS　Chapter1

## 目的「自分でネットワークやサーバを構築できるようになること。」

するとどうなるか？

- 障害に強くなる

- アプリケーション開発の枠組みだけでなく、システム全体での幅広い対応が出来るようになる

----------------

## ネットワークやサーバーを構築する。

### サーバーの構成を考える。

まずどのようなサーバーが必要か？

- Webサイトを公開する？→Webサーバー

- メールの送受信は？→メールサーバー

- データの保管？→データベース・サーバー

その実態は
サーバにそれぞれの機能のソフトをインストールしたもの。

#### サーバーを構築するのに必要な知識！

- サーバーOSのインストール方法

LinuxやWindows ServerなどのOSのインストールと設定方法

- 各ソフトウェアのインストールと設定方法

Webサーバーなら「Apache」「nginx」
DBサーバーなら「MySQL」「PostgreSQL」
メールサーバーなら「Sendmail」「Postfix」

### ネットワークの構成を考える！

ドメイン名を利用してアクセスするならDNSサーバーの設定が必要。
IPアドレスを適切に割り当て、ルーターへデータが流れる様に設定すること。
その他もろもろ。

#### ネットワークの構築のための知識

- IPアドレスに関する知識

IPアドレスをどのように定めるのか？
そして、ルーターを介したインターネットとのデータの流れをどのように制御するのか？
などの知識

- DNSサーバーに関する知識

ドメイン名とIPアドレスを結びつけるには？
どのようなやり取りでドメイン名とIPアドレスが変換されているか？

### 問題解決のためのツールを利用する

設定を確認するためにも、どのようなデータがネットワークを流れているか確認したい！
そのためのコマンドなど。
ping,traceroute,telnet,nslookup,digなどああいう系。

流れるデータを覗き見るには、Webブラウザのデバッグツールや、WireSharktといったネットワークプロトコルアナライザなどを使用。

----------------

## Wordpressでブログシステム

ここでは、ネットワークやサーバを一から構築後、Wordpressを導入する。
までを行います。

### 公開されたネットワークと隠されたネットワーク

- パブリックサブネット

公開されてる。Webサーバーを配置。

- プライベートサブネット

インターネットに接続されていない。隠されたネットワーク。
ここにはDBサーバーを配置。

#### ここでWebサーバーとDBサーバーを接続するのに必要な、NATサーバーとは？

NAT(Network Address Translation)は、内部だけで通用するアドレスを外部とも通信できるアドレスに変換する技術。
NATサーバーでは、片方向だけの接続を許す。ということが出来る。
DBサーバーからネットに繋げる。でもネットからDBサーバへは繋げない。という環境を実現。

--------------------

## 物理的なネットワークとAWS

AWSによって、機器を実際に集めないとという障壁を突破！
それぞれの用語を解説しやす！

#### 「リージョン」と「アベイラビリティゾーン」

- リージョン

世界10箇所のデータセンター群のそれぞれの事。
「東京リージョン」とか「オレゴンリージョン」とか。

- アベイラビリティゾーン

それぞれのリージョンをさらに分割したもの。
物理的に距離が離された、独立した設備（電源とかネットワークとか）を持つ。
Availability Zone(AZ)とも言う。



なので、AWSで仮想的なネットワークを構築する場合は、どのリージョンのどのアベイラビリティゾーンに作るか検討する必要がある。
もちろんユーザーの地域によってレスポンスが早くなったりと色々検討事項が着く。
対障害性のために、異なるアベイラビリティゾーンを使用するとか色々。


でも、今回は解りやすく、東京リージョンの一個のアベイラビリティゾーンで行くぜ！


#### 「ネットワーク」と「Amazon VPC」

AWSではAmazon VPCと呼ばれる領域を作り、そこで自由なネットワークを作る。
この時、どのようなIPアドレス範囲使うか指定する。

このVPCの中のサブネットにサーバーを配置していく。

#### 「サーバー」と「Amazon EC2インスタンス」

AWSでサーバーを作る場合使用するのは、Amazon EC2というサービス。
インスタンスを作るときは、CPUのスペックとか、ディスクの容量などを決められる。
本書では実験なので、CPUスペックが最も低い、t1.microというインスタンスタイプを使う。

## 本書の流れ

#### chapter 2 ネットワークの構築

システムの土台となる、ネットワークを設計。IPアドレスの割当方を考えつつ、パブリックサブネットの構築。

#### chapter 3 サーバーの構築

Amazon EC2を用いたサーバーを構築。サーバーに対して設定するFireWallの設定もついでに。

#### chapter 4 Webサーバーソフトのインストール

Apacheのインストール。
DNSの設定。

#### chapter 5 HTTPの動きを確認

デバッグツールを用いて、どのようなデータが送受信されているか確認。

#### chapter 6 プライベートサブネットを構築

インターネットからみえないプライベートサブネットを作製。
DBサーバーを配置。

#### chapter 7 NATサーバーを構築

NATサーバーを配置し、プライベートサブネットから、インターネットに接続できるようにする。

#### chapter 8 DBを用いたブログシステムの構築

DBサーバーへMySQLの導入。DBサーバーとして使用できる様にする。
その後、WebサーバーへWordpressを導入。

#### chapter 9 TCP/IPによる通信の仕組みを理解

最後のおさらい。次のステップとは？


